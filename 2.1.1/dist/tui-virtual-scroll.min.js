/*!
 * tui-virtual-scroll.min.js
 * @version 2.1.1
 * @author NHNEnt FE Development Lab <dl_javascript@nhnent.com>
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("tui-code-snippet")):"function"==typeof define&&define.amd?define(["tui-code-snippet"],e):"object"==typeof exports?exports.VirtualScroll=e(require("tui-code-snippet")):(t.tui=t.tui||{},t.tui.VirtualScroll=e(t.tui&&t.tui.util))}(this,function(t){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="dist",e(0)}([function(t,e,i){"use strict";var n=i(1),s=i(2),r=50,o=5,h=300,a=400,u="scroll",l="scrollTop",c="scrollBottom",m={top:!0,left:!0,height:!0,"margin-top":!0},f=n.defineClass({init:function(t,e){var i;e=n.extend({usageStatistics:!0},e),i=e.scrollPosition,i=n.isNumber(i)?Math.max(i,0):0,this.lastRenderedScrollPosition=i,this.prevScrollPosition=i,this.publicEventMode=!1,this._initData(e),this.container=n.isString(t)?document.getElementById(t):t,this.layout=this._renderLayout(this.container),this._renderContents(i),this._attachEvent(),e.usageStatistics&&n.sendHostname("virtual-scroll","UA-129987462-1")},_makeItemPositionList:function(t){var e=0;return n.map(t,function(t){var i={start:e,end:e+t};return e=i.end,i})},_updateItemData:function(){this.itemHeightList=n.pluck(this.items,"height"),this.itemPositionList=this._makeItemPositionList(this.itemHeightList)},_isPlusNumber:function(t){return n.isNumber(t)&&!isNaN(t)&&t>=0},_initData:function(t){var e=t.spareItemCount,i=t.itemHeight,n=t.threshold,s=t.containerHeight;this.items=[],this.itemHeightList=[],this.itemPositionList=[],this.itemHeight=this._isPlusNumber(i)?i:r,this.spareItemCount=this._isPlusNumber(e)?e:o,this.threshold=this._isPlusNumber(n)?n:h,this.layoutHeight=this._isPlusNumber(s)?s:a,this.limitScrollValueForRerender=this.spareItemCount/2*this.itemHeight,this._insertItems(t.items||[],0),this._updateItemData()},_createCssText:function(t){return n.map(t,function(t,e){var i=m[e]?"px":"";return e+":"+t+i}).join(";")},_createDivHtml:function(t,e){var i=n.map(t,function(t,e){return e+'="'+t+'"'}).join(" ");return"<div "+i+">"+e+"</div>"},_renderLayout:function(t){var e;if(!t)throw new Error("Not exist HTML container");if(!n.isHTMLTag(t))throw new Error("This container is not a HTML element");return e=this._createCssText({width:"100%",height:this.layoutHeight,"overflow-y":"auto","-webkit-overflow-scrolling":"touch","-webkit-transform":"translateZ(0)","-moz-transform":"translateZ(0)","-ms-transform":"translateZ(0)","-o-transform":"translateZ(0)",transform:"translateZ(0)"}),t.innerHTML=this._createDivHtml({style:e}),t.firstChild},_findActualStartIndex:function(t,e){var i=null;return e=e||0,n.forEachArray(t,function(t,s){return t.start<=e&&t.end>e&&(i=s),n.isEmpty(i)}),t.length&&n.isNull(i)&&(i=t.length-1),i},_calculateDisplayCount:function(t){var e=this.layoutHeight,i=0,s=0;return n.forEachArray(t,function(t){return i+=t,s+=1,i<e}),s},_createIndexRange:function(t){var e=this.itemHeightList,i=e.length,n=this.spareItemCount,s=this._findActualStartIndex(this.itemPositionList,t),r=this._calculateDisplayCount(e.slice(s)),o=Math.max(s-n,0),h=Math.min(s+r+n,i);return{start:o,end:h}},_createItemsHtml:function(t,e){var i=this.items.slice(t,e),s={width:"100%","overflow-y":"hidden",position:"absolute",left:0},r=0;return n.map(i,function(t){return s.height=t.height||this.itemHeight,s.top=r,r+=s.height,this._createDivHtml({style:this._createCssText(s)},t.contents)},this).join("")},_sum:function(t){var e=t.slice();return e.unshift(0),n.reduce(e,function(t,e){return t+e})},_createItemWrapperCssText:function(t){var e=this.itemHeightList,i=this._sum(e.slice(0,t)),n=this._sum(e)-i;return this._createCssText({width:"100%",height:n,"margin-top":i,position:"relative","overflow-y":"hidden"})},_createItemWrapperHtml:function(t){var e=this._createIndexRange(t),i=this._createItemsHtml(e.start,e.end),n=this._createItemWrapperCssText(e.start);return this._createDivHtml({style:n},i)},_renderContents:function(t){var e=this.layout,i=t||Math.max(this.layout.scrollTop,0);e.innerHTML=this._createItemWrapperHtml(i),n.isExisty(t)&&setTimeout(function(){e.scrollTop=t})},_firePublicEvent:function(t,e){this.publicEventMode||(this.fire(t,e),this.publicEventMode=!0)},_onScroll:function(){var t=this.layout.scrollTop,e=this.layout.scrollHeight-this.layout.offsetHeight,i={scrollPosition:t,scrollHeight:e};this.fire(u,n.extend({movedPosition:this.prevScrollPosition-t},i)),this.prevScrollPosition=t,t>=e-this.threshold?this._firePublicEvent(c,i):t<=this.threshold?this._firePublicEvent(l,i):this.publicEventMode=!1,Math.abs(this.lastRenderedScrollPosition-t)<this.limitScrollValueForRerender||(this.lastRenderedScrollPosition=t,this._renderContents())},_attachEvent:function(){s.on(this.layout,"scroll",this._onScroll,this)},_correctItems:function(t){var e=[];return n.forEachArray(t,function(t){n.isObject(t)?(t.height=n.isNumber(t.height)?t.height:this.itemHeight,e.push(t)):n.isExisty(t)&&e.push({height:this.itemHeight,contents:String(t)})},this),e},_insertItems:function(t,e){t=this._correctItems(t),this.items.splice.apply(this.items,[e,0].concat(t))},append:function(t){this._insertItems(t,this.items.length),this._updateItemData(),this._renderContents()},prepend:function(t){var e=this.layout.scrollTop+this._sum(n.pluck(t,"height"));this._insertItems(t,0),this._updateItemData(),this._renderContents(e)},insert:function(t,e){var i=this.items.length-1;e=Math.max(Math.min(e,i),0),this._insertItems(t,e),this._updateItemData(),this._renderContents()},_removeItem:function(t){var e;if(!this._isPlusNumber(t))throw new Error("The index should be a plus number");return e=this.items.splice(t,1),e[0]},_removeItems:function(t){var e=[],i=[];return n.isArray(t)&&(n.forEachArray(this.items,function(s,r){n.inArray(r,t)===-1?e.push(s):i.push(s)},this),this.items=e),i},remove:function(t,e){var i;return i=n.isArray(t)?this._removeItems(t):this._removeItem(t),this._updateItemData(),e=e!==!1,e&&i&&(!n.isArray(i)||i.length)&&this._renderContents(),i},clear:function(){this.items=[],this.itemHeightList=[],this.itemPositionList=[],this.layout.innerHTML=""},moveScroll:function(t){if(t=parseInt(t,10),!this._isPlusNumber(t))throw new Error("The scroll position value should be a plus number");this._renderContents(t)},resizeHeight:function(t){var e;if(t=parseInt(t,10),!this._isPlusNumber(t))throw new Error("The height value should be a plus number");e=this.layout.scrollTop,this.layoutHeight=t,this.layout.style.height=t+"px",this._renderContents(e)},getItems:function(){return this.items.slice()},getItemCount:function(){return this.items.length},getScrollPosition:function(){return this.layout.scrollTop},destroy:function(){s.off(this.layout,"scroll",this._onScroll,this),this.container.innerHTML="",this.container=null}});n.CustomEvents.mixin(f),t.exports=f},function(e,i){e.exports=t},function(t,e,i){"use strict";var n=i(1),s={},r={_attachEvent:function(t,e,i,r){var o;o=r?n.bind(i,r):i,s[e+i]=o,t.attachEvent("on"+e,o)},_addEventListener:function(t,e,i,r){var o;o=r?n.bind(i,r):i,s[e+i]=o,t.addEventListener(e,o)},_bindEvent:function(t,e,i,n){var s;"addEventListener"in t?s=this._addEventListener:"attachEvent"in t&&(s=this._attachEvent),r._bindEvent=s,s(t,e,i,n)},on:function(t,e,i,s){var o={};n.isString(e)?o[e]=i:(o=e,s=i),n.forEach(o,function(e,i){r._bindEvent(t,i,e,s)})},_detachEvent:function(t,e,i){s[e+i]&&(t.detachEvent("on"+e,s[e+i]),delete s[e+i])},_removeEventListener:function(t,e,i){t.removeEventListener(e,s[e+i]),delete s[e+i]},_unbindEvent:function(t,e,i){var n;"removeEventListener"in t?n=r._removeEventListener:"detachEvent"in t&&(n=r._detachEvent),r._unbindEvent=n,n(t,e,i)},off:function(t,e,i){var s={};n.isString(e)?s[e]=i:s=e,n.forEach(s,function(e,i){r._unbindEvent(t,i,e)})}};t.exports=r}])});