/*!
 * @fileoverview tui-component-virtual-scroll
 * @author NHN Ent. FE Development Lab <dl_javascript@nhnent.com>
 * @version 1.0.1
 * @license MIT
 * @link https://github.nhnent.com/fe/component-virtual-scroll.git
 * bundle created at "Tue Nov 15 2016 14:27:53 GMT+0900 (KST)"
 */
!function(t){function i(n){if(e[n])return e[n].exports;var s=e[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}var e={};return i.m=t,i.c=e,i.p="/dev/",i(0)}([function(t,i,e){"use strict";var n=e(1),s=50,r=5,o=300,u=400,h="scroll",a="scrollTop",l="scrollBottom",c={top:!0,left:!0,height:!0,"margin-top":!0},m=tui.util.defineClass({init:function(t,i){var e=i.scrollPosition;i=i||{},e=tui.util.isNumber(e)?Math.max(e,0):0,this.lastRenderedScrollPosition=e,this.prevScrollPosition=e,this.publicEventMode=!1,this._initData(i),this.container=tui.util.isString(t)?document.getElementById(t):t,this.layout=this._renderLayout(this.container),this._renderContents(e),this._attachEvent()},_makeItemPositionList:function(t){var i=0;return tui.util.map(t,function(t){var e={start:i,end:i+t};return i=e.end,e})},_updateItemData:function(){this.itemHeightList=tui.util.pluck(this.items,"height"),this.itemPositionList=this._makeItemPositionList(this.itemHeightList)},_isPlusNumber:function(t){return tui.util.isNumber(t)&&!isNaN(t)&&t>=0},_initData:function(t){var i=t.spareItemCount,e=t.itemHeight,n=t.threshold,h=t.containerHeight;this.items=[],this.itemHeightList=[],this.itemPositionList=[],this.itemHeight=this._isPlusNumber(e)?e:s,this.spareItemCount=this._isPlusNumber(i)?i:r,this.threshold=this._isPlusNumber(n)?n:o,this.layoutHeight=this._isPlusNumber(h)?h:u,this.limitScrollValueForRerender=this.spareItemCount/2*this.itemHeight,this._insertItems(t.items||[],0),this._updateItemData()},_createCssText:function(t){return tui.util.map(t,function(t,i){var e=c[i]?"px":"";return i+":"+t+e}).join(";")},_createDivHtml:function(t,i){var e=tui.util.map(t,function(t,i){return i+'="'+t+'"'}).join(" ");return"<div "+e+">"+i+"</div>"},_renderLayout:function(t){var i;if(!t)throw new Error("Not exist HTML container");if(!tui.util.isHTMLTag(t))throw new Error("This container is not a HTML element");return i=this._createCssText({width:"100%",height:this.layoutHeight,"overflow-y":"auto","-webkit-overflow-scrolling":"touch","-webkit-transform":"translateZ(0)","-moz-transform":"translateZ(0)","-ms-transform":"translateZ(0)","-o-transform":"translateZ(0)",transform:"translateZ(0)"}),t.innerHTML=this._createDivHtml({style:i}),t.firstChild},_findActualStartIndex:function(t,i){var e=null;return i=i||0,tui.util.forEachArray(t,function(t,n){return t.start<=i&&t.end>i&&(e=n),tui.util.isEmpty(e)}),t.length&&tui.util.isNull(e)&&(e=t.length-1),e},_calculateDisplayCount:function(t){var i=this.layoutHeight,e=0,n=0;return tui.util.forEachArray(t,function(t){return e+=t,n+=1,e<i}),n},_createIndexRange:function(t){var i=this.itemHeightList,e=i.length,n=this.spareItemCount,s=this._findActualStartIndex(this.itemPositionList,t),r=this._calculateDisplayCount(i.slice(s)),o=Math.max(s-n,0),u=Math.min(s+r+n,e);return{start:o,end:u}},_createItemsHtml:function(t,i){var e=this.items.slice(t,i),n={width:"100%","overflow-y":"hidden",position:"absolute",left:0},s=0;return tui.util.map(e,function(t){return n.height=t.height||this.itemHeight,n.top=s,s+=n.height,this._createDivHtml({style:this._createCssText(n)},t.contents)},this).join("")},_sum:function(t){var i=t.slice();return i.unshift(0),tui.util.reduce(i,function(t,i){return t+i})},_createItemWrapperCssText:function(t){var i=this.itemHeightList,e=this._sum(i.slice(0,t)),n=this._sum(i)-e;return this._createCssText({width:"100%",height:n,"margin-top":e,position:"relative","overflow-y":"hidden"})},_createItemWrapperHtml:function(t){var i=this._createIndexRange(t),e=this._createItemsHtml(i.start,i.end),n=this._createItemWrapperCssText(i.start);return this._createDivHtml({style:n},e)},_renderContents:function(t){var i=this.layout,e=t||Math.max(this.layout.scrollTop,0);i.innerHTML=this._createItemWrapperHtml(e),tui.util.isExisty(t)&&setTimeout(function(){i.scrollTop=t})},_firePublicEvent:function(t,i){this.publicEventMode||(this.fire(t,i),this.publicEventMode=!0)},_onScroll:function(){var t=this.layout.scrollTop,i=this.layout.scrollHeight-this.layout.offsetHeight,e={scrollPosition:t,scrollHeight:i};this.fire(h,tui.util.extend({movedPosition:this.prevScrollPosition-t},e)),this.prevScrollPosition=t,t>=i-this.threshold?this._firePublicEvent(l,e):t<=this.threshold?this._firePublicEvent(a,e):this.publicEventMode=!1,Math.abs(this.lastRenderedScrollPosition-t)<this.limitScrollValueForRerender||(this.lastRenderedScrollPosition=t,this._renderContents())},_attachEvent:function(){n.on(this.layout,"scroll",this._onScroll,this)},_correctItems:function(t){var i=[];return tui.util.forEachArray(t,function(t){tui.util.isObject(t)?(t.height=tui.util.isNumber(t.height)?t.height:this.itemHeight,i.push(t)):tui.util.isExisty(t)&&i.push({height:this.itemHeight,contents:String(t)})},this),i},_insertItems:function(t,i){t=this._correctItems(t),this.items.splice.apply(this.items,[i,0].concat(t))},append:function(t){this._insertItems(t,this.items.length),this._updateItemData(),this._renderContents()},prepend:function(t){var i=this.layout.scrollTop+this._sum(tui.util.pluck(t,"height"));this._insertItems(t,0),this._updateItemData(),this._renderContents(i)},insert:function(t,i){var e=this.items.length-1;i=Math.max(Math.min(i,e),0),this._insertItems(t,i),this._updateItemData(),this._renderContents()},_removeItem:function(t){var i;if(!this._isPlusNumber(t))throw new Error("The index should be a plus number");return i=this.items.splice(t,1),i[0]},_removeItems:function(t){var i=[],e=[];return tui.util.isArray(t)&&(tui.util.forEachArray(this.items,function(n,s){tui.util.inArray(s,t)===-1?i.push(n):e.push(n)},this),this.items=i),e},remove:function(t,i){var e;return e=tui.util.isArray(t)?this._removeItems(t):this._removeItem(t),this._updateItemData(),i=i!==!1,i&&e&&(!tui.util.isArray(e)||e.length)&&this._renderContents(),e},clear:function(){this.items=[],this.itemHeightList=[],this.itemPositionList=[],this.layout.innerHTML=""},moveScroll:function(t){if(t=parseInt(t,10),!this._isPlusNumber(t))throw new Error("The scroll position value should be a plus number");this._renderContents(t)},resizeHeight:function(t){var i;if(t=parseInt(t,10),!this._isPlusNumber(t))throw new Error("The height value should be a plus number");i=this.layout.scrollTop,this.layoutHeight=t,this.layout.style.height=t+"px",this._renderContents(i)},getItems:function(){return this.items.slice()},getItemCount:function(){return this.items.length},getScrollPosition:function(){return this.layout.scrollTop},destroy:function(){n.off(this.layout,"scroll",this._onScroll,this),this.container.innerHTML="",this.container=null}});tui.util.CustomEvents.mixin(m),tui.util.defineNamespace("tui.component",{VirtualScroll:m})},function(t,i){"use strict";var e={},n={_attachEvent:function(t,i,n,s){var r;r=s?tui.util.bind(n,s):n,e[i+n]=r,t.attachEvent("on"+i,r)},_addEventListener:function(t,i,n,s){var r;r=s?tui.util.bind(n,s):n,e[i+n]=r,t.addEventListener(i,r)},_bindEvent:function(t,i,e,s){var r;"addEventListener"in t?r=this._addEventListener:"attachEvent"in t&&(r=this._attachEvent),n._bindEvent=r,r(t,i,e,s)},on:function(t,i,e,s){var r={};tui.util.isString(i)?r[i]=e:(r=i,s=e),tui.util.forEach(r,function(i,e){n._bindEvent(t,e,i,s)})},_detachEvent:function(t,i,n){e[i+n]&&(t.detachEvent("on"+i,e[i+n]),delete e[i+n])},_removeEventListener:function(t,i,n){t.removeEventListener(i,e[i+n]),delete e[i+n]},_unbindEvent:function(t,i,e){var s;"removeEventListener"in t?s=n._removeEventListener:"detachEvent"in t&&(s=n._detachEvent),n._unbindEvent=s,s(t,i,e)},off:function(t,i,e){var s={};tui.util.isString(i)?s[i]=e:s=i,tui.util.forEach(s,function(i,e){n._unbindEvent(t,e,i)})}};t.exports=n}]);